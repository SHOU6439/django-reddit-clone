{% extends 'base.html' %}
{% load static %}
{% block main-content %}
<div class="chat-home-background-container">
    <div class="chat-home-left-menu">
        <div class="chat-home-left-menu-heading-container">
            <h2 class="chat-home-left-menu-heading">Chat</h2>
            <div class="add-dm-room-button-wrapper">
                <a href="{% url 'chat:home' %}"><i class="fas fa-comment-medical" style="width: 25px; height: 25px;"></i></a>
            </div>
        </div>
        <div class="chat-select-chat-type-row">
            <ul class="chat-type-list">
                <a href="{% url 'chat:home' %}"><li class="chat-type-list-element">All</li></a>
                <a href="{% url 'chat:dm_home' %}"><li class="chat-type-list-displaying-element">DMs</li></a>
                <a href=""><li class="chat-type-list-element">Group</li></a>
            </ul>
        </div>
        {% if dm_invites %}
        <h3 class="chat-home-chat-status-heading">Invites</h3>
        {% for dm_invite in dm_invites %}
        {% if current_room.id == dm_invite.room.id %}
        <div class="chat-dm-addressee-list">
            <a href="{% url 'chat:dm_room_detail' dm_invite.room.id %}">
                <div class="chat-dm-displaying-addressee-detail-box">
                    <img class="chat-dm-addressee-thumbnail" src="{% if dm_invite.invited_user.thumbnail %}{{ dm_invite.invited_user.thumbnail.url }}{% else %}{% static 'img/reddit_default_user_icon.jpeg' %}{% endif %}" alt="icon">
                    <p class="chat-dm-addressee-username">{{ dm_invite.invited_user }}</p>
                </div>
            </a>
        </div>
        {% else %}
        <div class="chat-dm-addressee-list">
            <a href="{% url 'chat:dm_room_detail' dm_invite.room.id %}">
                <div class="chat-dm-addressee-detail-box">
                    <img class="chat-dm-addressee-thumbnail" src="{% if dm_invite.invited_user.thumbnail %}{{ dm_invite.invited_user.thumbnail.url }}{% else %}{% static 'img/reddit_default_user_icon.jpeg' %}{% endif %}" alt="icon">
                    <p class="chat-dm-addressee-username">{{ dm_invite.invited_user }}</p>
                </div>
            </a>
        </div>
        {% endif %}
        {% endfor %}
        {% endif %}
        {% if dm_invites and dm_rooms %}
        <h3 class="chat-home-chat-status-heading">Chats</h3>
        {% endif %}
        {% for dm_room in dm_rooms %}
        {% if current_room.id == dm_room.id %}
        <div class="chat-dm-addressee-list">
            <a href="{% url 'chat:dm_room_detail' dm_room.id %}">
                <div class="chat-dm-displaying-addressee-detail-box">
                    <img class="chat-dm-addressee-thumbnail" src="{% if dm_room.addressee.thumbnail %}{{ dm_room.addressee.thumbnail.url }}{% else %}{% static 'img/reddit_default_user_icon.jpeg' %}{% endif %}" alt="icon">
                    <p class="chat-dm-addressee-username">{{ dm_room.addressee }}</p>
                </div>
            </a>
        </div>
        {% else %}
        <div class="chat-dm-addressee-list">
            <a href="{% url 'chat:dm_room_detail' dm_room.id %}">
                <div class="chat-dm-addressee-detail-box">
                    <img class="chat-dm-addressee-thumbnail" src="{% if dm_room.addressee.thumbnail %}{{ dm_room.addressee.thumbnail.url }}{% else %}{% static 'img/reddit_default_user_icon.jpeg' %}{% endif %}" alt="icon">
                    <p class="chat-dm-addressee-username">{{ dm_room.addressee }}</p>
                </div>
            </a>
        </div>
        {% endif %}
        {% endfor %}
    </div>
    <div class="chat-home-main-container">
        <div class="dm-room-detail-background-container">
            {% if current_invite %}
            <div class="dm-room-detail-footer-container">
                <p class="dm-room-detail-footer-text">Do you want to accept the invitation?</p>
                <a class="dm-room-invite-ignore-button" href="{% url 'chat:ignore_dm_invite' current_room.author.id %}">Ignore</a>
                <a class="dm-room-invite-accept-button" href="{% url 'chat:accept_dm_invite' current_room.author.id %}">Accept</a>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}